<!DOCTYPE html><html lang=zh><head><meta charset=UTF-8><title>水印助手</title><meta content="width=device-width,initial-scale=1" name=viewport><style>body{margin:auto;max-width:60vh}img{border:3px solid #2c3e50;border-radius:5px;width:100%;box-sizing:border-box}canvas{width:100%;height:0}a,label{display:flex;align-items:center;margin-top:8px}</style></head><body><canvas></canvas><div><input id=upload-input type=file accept=image/*><label>水印文字： <input id=content type=text value=仅供XX实名认证使用></label><label>水印颜色： <input id=color type=color value=#ffffff></label><label>不透明度： <input id=alpha type=range value=50 max=100 min=10></label><label>水印大小比： <input id=size type=range value=5 max=10 min=3></label><label>旋转角度： <input id=angle type=range value=45 max=180 min=-180><span id=anglevalue></span></label><label>水印间隔比： <input id=gap type=range value=150 max=300 min=20></label><label>水印字体： <input id=font type=text value=sans-serif></label><a download href="javascript:alert('请先打开图片')">保存图片</a></div><script>var img=null;function repaint(){if(img){var e=document.getElementsByTagName("canvas")[0].getContext("2d"),t=(e.canvas.width=img.width,e.canvas.height=img.height,Math.max(img.height,img.width)),a=(e.canvas.style.height=img.height/img.width*100+"%",e.restore(),e.drawImage(img,0,0),e.fillStyle=document.getElementById("color").value,e.globalAlpha=document.getElementById("alpha").value/100,document.getElementById("size").value*t/100),n=(e.font=a+'px "'+document.getElementById("font").value+'"',e.textBaseline="middle",e.rotate(document.getElementById("angle").value*Math.PI/180),a*document.getElementById("gap").value/100),l=document.getElementById("content").value;if(l.length){for(var i=Math.sqrt(t*t*2),m=e.measureText(l).width,g=-t,d=!1;g<=i;g+=a+n,d=!d)for(var o=-t-(d?m/2:0);o<=i+(d?m/2:0);o+=m+a)e.fillText(l,o,g);document.getElementsByTagName("a")[0].href=e.canvas.toDataURL()}}}function updateValue(){var e=document.getElementById("angle").value;document.getElementById("anglevalue").innerHTML=e}function createBitmap(e,t){var a=document.createElement("img");a.addEventListener("load",function(){t(this)}),a.src=URL.createObjectURL(e)}document.addEventListener("change",function(e){"file"===e.target.type?e.target.files.length&&(createBitmap(e=e.target.files[0],function(e){img=e,repaint()}),(e=e.name.split(".")).splice(-1,0,"watermarked"),document.getElementsByTagName("a")[0].download=e.join(".")):repaint()})</script></body></html>